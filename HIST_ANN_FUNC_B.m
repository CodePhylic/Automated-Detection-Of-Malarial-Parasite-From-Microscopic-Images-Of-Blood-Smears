function [y1] = HIST_ANN_FUNC_B(x1)
%MYNEURALNETWORKFUNCTION neural network simulation function.
%
% Generated by Neural Network Toolbox function genFunction, 26-Jun-2016 19:41:17.
% 
% [y1] = myNeuralNetworkFunction(x1) takes these arguments:
%   x = 80xQ matrix, input #1
% and returns:
%   y = 2xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

  % ===== NEURAL NETWORK CONSTANTS =====
  
  % Input 1
  x1_step1_xoffset = [0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0];
  x1_step1_gain = [14.2222222222222;20.48;26.9473684210526;26.9473684210526;34.1333333333333;34.1333333333333;36.5714285714286;32;46.5454545454545;51.2;56.8888888888889;34.1333333333333;56.8888888888889;64;46.5454545454545;85.3333333333333;56.8888888888889;102.4;85.3333333333333;85.3333333333333;64;73.1428571428571;85.3333333333333;73.1428571428571;73.1428571428571;85.3333333333333;85.3333333333333;56.8888888888889;64;64;56.8888888888889;102.4;128;128;85.3333333333333;73.1428571428571;170.666666666667;73.1428571428571;128;170.666666666667;170.666666666667;64;102.4;170.666666666667;128;170.666666666667;170.666666666667;170.666666666667;128;170.666666666667;170.666666666667;85.3333333333333;128;128;128;102.4;256;170.666666666667;128;170.666666666667;128;170.666666666667;128;170.666666666667;256;170.666666666667;256;170.666666666667;170.666666666667;170.666666666667;170.666666666667;256;128;170.666666666667;170.666666666667;170.666666666667;170.666666666667;256;512;256];
  x1_step1_ymin = -1;
  
  % Layer 1
  b1 = [1.4363477606923196;-1.1820232689816257;-0.71775595179411256;-0.61386088719516363;-0.21942901248547997;0.19845733582880176;-0.41609420240778183;0.74115264233451306;-1.0398357484101535;1.3838495086228166];
  IW1_1 = [-0.25090502947264454 -0.2529148270496937 -0.062525038642723949 0.1007383508700891 -0.1314192245197455 -0.1313566968616621 0.18241887708091542 -0.23976539872433961 0.1624357446447231 -0.22404619939093168 0.2537704799510303 0.22681801172808483 0.068991793841727267 -0.24172722408486838 -0.05665889407687983 -0.077649659571674121 -0.10788172818669842 0.15279429645045844 -0.062870542029509688 -0.10509528981674465 0.23362526678730075 -0.12695318401531991 -0.12656404065464319 0.028570221501308442 0.21317839036395766 0.087460217455666706 0.13515082126247038 -0.13822785171074148 0.10283645804060257 0.013605403337164363 -0.055732077039088328 -0.034476998892400759 0.23144423236829001 0.11115864272957525 0.037007340839101177 -0.064721841077999859 -0.1126659365685764 0.2103296430842081 -0.2171669076165961 0.086874978655213986 -0.039724654589377628 0.24537060764801505 -0.14692842817521826 -0.27025762887761245 0.12420342695501374 0.14837602286097945 0.099768428307836193 0.091081849679927135 0.025965614898143748 0.084216069645481631 -0.026656654238539031 -0.2175580423275254 -0.1892797794320096 -0.054908744145708885 -0.034496464065353484 0.24840755724814612 0.2120744484500405 -0.22169786842793779 0.035568291319216828 0.26879674143509458 0.050695583263322679 0.047175441874793 0.074061286874909829 -0.16844735635568478 -0.0045942323795651495 -0.22649095354450749 -0.23477843568885057 -0.25261181184721099 0.19592226552554901 0.024574854688777074 -0.07262558195535733 -0.21387784448258185 -0.23009618134188284 -0.21339508906866383 -0.2201034715333734 -0.26315460246898298 0.034291594581946631 -0.0067560067813340055 -0.20194524352803822 -0.14125226512103792;0.13689949625486914 -0.13485167500836015 0.15848406763337383 0.11391969468526444 0.037115968309946221 0.2049135182346678 0.055720987360545371 0.056838528072367216 -0.080350638188844525 -0.12446666689502983 -0.28772928792906488 -0.11770994381060783 -0.049293469212841196 0.29507472395124429 -0.092712966060047086 0.20307531099659312 0.15628130374722693 0.0033913198139898367 0.19535564012717502 0.042432443966429256 -0.013431511343875017 0.098819257207741082 0.17840586781591952 0.053189345446376372 0.26870186253804812 0.014252535684829089 0.049386156215041346 0.25663246786072125 -0.22308297816835168 0.30975594693781333 0.24230859070644559 -0.2116067300862263 -0.1830946497740786 0.1080837333757028 0.26235315905021972 -0.13068886016161579 0.098887575996386576 0.252470917409861 0.11639198371091158 0.0093309004430349955 -0.19333270602856964 0.14323756510580854 0.14056718814958502 -0.048728309524720667 0.069428416556704842 -0.14243603315296871 0.1260755173449799 0.1711380954279958 0.23933406055903836 0.01874867404154993 -0.0044187899322653337 0.058398321411696402 0.09836856626462423 0.16059755977409557 0.24179555518040594 -0.052662809843504729 0.1238958604165276 -0.19449776222352066 0.20275280461725528 0.019575855934143207 -0.10119123296035767 0.1571750075860501 -0.23951980416122962 -0.19832102885255096 0.24760914416050678 -0.15863230580823245 0.22227010200267769 0.23918286536387953 -0.05548700404007427 0.12758830428689269 -0.19671216861916146 0.1253631625754382 -0.064361786452001107 0.28620804610994938 -0.15583972803200841 -0.18817020591813383 0.01375056208101103 0.26632619745365688 0.14395439654155948 0.16584409911414649;0.68697917822526844 -0.0041127547551343957 0.3862031142962683 -0.12951122990826203 0.21426548803331349 -0.086954125457985532 0.18705587578079774 0.25970964812194497 0.1271440603938126 0.42265207957265083 0.27966031573690275 -0.22064331136037971 0.014313639931319403 0.10021596227564424 -0.12816784764966613 -0.42566421481888905 -0.12747231724654642 -0.13710067798773087 -0.13670316348131129 -0.38626236694541632 -0.18671546316608897 0.12407856658173161 -0.15440826564623028 -0.21488734471301985 0.1615651989313516 0.1529800706236692 -0.069749589883649321 -0.3291040127173892 -0.211659681349392 0.031782800371980224 0.13329752850611126 0.23088155417990158 0.038455921760769375 0.12143907548709498 0.14236893280404267 0.011556651859471183 -0.077370102307434976 -0.22234175501304299 -0.14316848036952173 0.018312482322056997 -0.068568641976014075 0.17222356604830469 0.18752865389225293 -0.02832490994049626 -0.28170254523008825 -0.28528118718720791 0.13359698761101169 -0.15751844193734549 -0.13134777506494102 0.14434561055020562 0.057350470640475437 -0.01467284806710013 -0.029426789082579813 0.088145226419257205 -0.07983371617008414 0.077459667994054293 -0.43817500394861075 -0.20738192148878726 0.29722358551974193 0.062304211281829183 0.10771566453964489 0.41340153994967421 0.17656097530248671 0.064507568102939492 0.3239469180155895 -0.32348267237894529 0.24556533445711362 -0.063273861875973891 -0.011628356737166036 0.26125837441659822 -0.068565517205806059 0.17573190783635434 -0.25146199667913455 -0.19445208615326151 0.035889002314820284 -0.034636464977348944 -0.38429699744382018 0.20361732624755768 0.25252337688811227 0.22147597759200963;0.19818977352988298 -0.12495390432934111 -0.070387799269305037 -0.1091922949326783 0.3109613087184821 0.33152050821826334 0.32207056940533824 0.34600043529036811 -0.097795206545501404 -0.10062813427012268 0.25457764478287448 -0.099796542937223079 0.020587241959565798 0.070726529096057852 -0.13215918388327436 -0.20548121448674006 0.1933752794468713 0.022014896178204589 -0.0065923140842568334 0.25957248377415987 0.32227587707740418 -0.078363061964064937 0.33354351494666734 0.081603759933677383 -0.12246267091983659 0.21616812817792094 0.31318767446863827 0.091521892504256727 0.12495604339079087 0.26560292244682548 -0.1349188521584645 -0.10769490513551581 -0.050555932946194961 0.21474580440797866 -0.061065856382950853 0.10618719661196688 0.26842062141492146 0.161526973134171 0.20851275125120397 0.19161840541239922 -0.10216310300987044 -0.028165355518191344 0.020951371557674216 0.079567649992567865 0.015494316309782255 -0.14355714696250099 -0.085424879216122351 0.18089097352825997 0.014706280123382801 0.11322983748237887 0.15975697233044792 0.32191512865918409 -0.14215717530354494 0.079343099724506996 0.26965435204891625 0.07384854027057379 -0.096645794671644913 0.18858819274500466 0.16614170978406106 0.27971659183571251 -0.10278221390616425 -0.13505428135060513 0.041357316896512307 -0.012736702084026764 -0.034946628556258331 -0.1040440802121444 0.39603198489547559 0.0075466944039176906 -0.14884701681663043 -0.0099544070906304426 0.029732651293733075 0.13017521903495557 0.085383979906638735 -0.004816395721670981 0.33115874636935888 0.1717956197426613 0.26427886189730698 0.24337007972226268 -0.11381265114354952 0.30725324831032652;0.023332542797577169 0.12278365682814063 -0.051227393187925518 0.027578640155381726 0.27096997222616132 -0.082557958191610312 -0.15516660633509044 -0.19057693632740011 0.076802181358955154 0.12475978731839604 0.18770514527170523 -0.15835692182162564 -0.23624728072368667 0.040953078463019932 -0.18636825069328181 -0.15442390895912572 -0.17017158993086148 -0.075725642240935587 0.29756547093786306 -0.079309529300655365 0.29631545764752187 -0.16678598468243105 0.10082617089789862 0.085108736336959867 -0.12282197541991022 0.24489132673220987 0.076343743976071271 -0.13794059237671322 -0.2067180582785049 0.030722287878419116 -0.014924785870024186 -0.18258143740173513 0.025880051009384529 0.11965030254883215 -0.028096585562305522 -0.19556085650614863 0.27083184856334336 -0.21207571332835945 0.20205955700012718 0.36071242751616039 -0.15534097595037838 0.16450266251317869 0.20539826567701677 0.17901705451126843 0.1398228586583517 0.12215607844473983 0.17685755116904933 -0.016509585374085166 -0.16274167804310902 0.28739908397202901 0.26088506703054642 0.047389356568035709 0.14910128560836278 -0.21207531100597327 0.0063125708210594079 0.25577223152706963 0.080410577670691888 0.0057108847389761366 0.12072442444730598 -0.12132117946163259 0.10943331678798536 -0.28808482395058932 -0.2271511645268435 0.076222640949624207 -0.11296399232336693 0.15193866087486135 0.23149736679730773 -0.057331002248265886 -0.13776840193262371 -0.0029031696306011717 -0.11328642796675478 -0.14848999376198022 -0.19754028980381147 -0.20754946680949959 0.13475183273969954 0.082854842898637163 -0.0053528982936838221 -0.23098374661374874 0.03670991767945711 -0.15094066409814877;0.11070362821150756 0.065372475533461094 -0.10491297591105349 0.25849627253658103 -0.039313453706376497 -0.31310195148311959 0.068402780400809882 -0.042670687230292326 -0.26801496255429363 -0.087208601146955445 -0.35504197298449552 0.19771066383768246 -0.21026223717709264 -0.12836132368768799 0.26895886798195251 0.1391823429348045 -0.12798183613426165 -0.024218184702728775 0.28084774713260063 -0.15004033018254301 -0.067675893200632428 -0.11397710872101341 -0.049660437070046887 0.11753684968400299 -0.099922453904573771 0.26381090180432087 0.020145962454471398 0.30424242376512117 0.16222738185972799 -0.079936200840295735 0.017744496092456506 -0.14778325059218492 0.071682069256086167 -0.30940754518218994 -0.086122752414167225 0.024375949585095268 0.15992426455866562 -0.047204612900314413 0.092019219361274107 0.0068592679484916382 -0.10958542780259971 -0.14445705384303648 0.08444040842056097 -0.14481546657422961 -0.17407858249489463 0.13807525232979345 -0.20958098992804111 0.21990804749846729 0.25528364171601686 -0.21884501966135889 0.30642962755354886 -0.10233494821018599 -0.2646539252711646 -0.12901595511244754 0.19249962177316199 0.15791435682473026 0.22930272128782209 -0.30843068378208061 0.13072727662616862 -0.0449181988590601 0.02570267696627105 0.10412755785652884 -0.071991936697340872 0.10614838624296254 0.049137470721950821 0.01549503843831323 0.11272482780308317 -0.030626402869348146 0.030874697561370228 -0.08781544314271561 -0.17556661581233213 -0.0042599089483534788 0.24355533243976446 -0.17974054115665755 -0.29044740189145452 0.15220583546821462 0.075186083933039147 -0.38051149944356744 -0.28108523512114664 -0.12618729902817355;0.033013493747735427 -0.045136341297960465 0.096836783497293494 -0.13617799495964589 -0.21431551740283719 -0.15265380434246612 0.2050591612887778 -0.015201357742788586 0.11739662931518587 0.35440919571499868 -0.040179899167996802 0.019986756569201666 -0.18451095767656472 0.16483880511230167 0.24096317056202787 0.080559594375300844 0.078371943336105865 0.017215420933015486 0.0026967360005954342 -0.30717193597047471 -0.19819667012020112 -0.068998543152361369 0.1076546155418803 -0.065048340632718096 0.077801138561503322 -0.099572755774562483 0.22825363152203465 0.10179931127521465 0.19977943919032787 0.19155616320254817 -0.083173851496002177 -0.20454630778416222 0.17954086817837966 -0.22268700749958903 0.23277675113856172 -0.16818113445519994 -0.072905923997089048 -0.16457745874192864 -0.38758159157984085 -0.23364960203605428 0.039233998249050238 0.018034609121155672 -0.34218641962075497 0.17699247824555014 0.047888243395845007 -0.047412173870045357 -0.30639010362206259 0.15242171029701654 0.066241677112475139 -0.26115441328114053 0.19232187246591526 0.061048714996480319 -0.01114069969932955 -0.10778125352718457 0.10682795679532917 -0.23989361816141275 0.097560765720102471 0.0025091681856246814 0.34655769907621936 0.19545361824262042 0.10998221187989676 0.084334629839311281 -0.15757582032307196 -0.0341280012495907 0.10274376929043308 -0.33682159110794258 0.026523138049616826 0.028477796884891507 -0.15169682537903001 0.16623554555060288 0.16897158769061607 -0.12457743838858877 -0.23605031077776334 -0.32109711911236744 0.12078137524209841 0.0052207249460846303 0.082049107342602595 -0.21189618391716039 0.19413501646089293 -0.15892595754978484;0.063211014145532041 0.26549766702551769 0.14023751312971408 0.079638870915027846 -0.19106983674520539 0.073788266122008089 -0.13791932509676197 -0.32988617261138287 0.097589846135357303 -0.30375633959833204 -0.19268538178615585 0.076023223096155945 -0.17161857263216967 -0.013606431964062554 0.10297352054316139 0.17333613021761152 0.19548178913629349 0.15283685505590866 0.046920347596459251 -0.097626052567542837 -0.24120272295013309 -0.053242983168875962 -0.26450306813595975 -0.1624509979611472 -0.2962422948230371 0.093551514749340703 0.12696515492123256 0.014776797146582463 0.044059061509794412 -0.22597772859620863 0.016408225696384469 -0.025283363198963318 0.02494792691729902 0.31749309044793017 -0.13609564601466875 -0.14875010592802979 0.064321633947583015 -0.10177712176262922 -0.23780332783228816 -0.0848947300468708 -0.095170709200328496 0.1728635877519526 0.012525419246286531 -0.016429571208139 -0.021963758595015231 -0.01746105593538258 0.10342280408923776 -0.11325533308568514 0.024897908517673636 -0.28305576446478914 -0.11847176014511254 0.1958567517110813 0.11883309404970174 -0.052813605447024722 -0.045554194429433911 0.24107489129407167 0.27300723626004619 -0.19228265284647186 -0.31967408259127228 0.074131108678882271 0.28055215295148639 0.19123075030872794 -0.22574509461932354 0.076424565030037001 0.027667069915543931 0.35236951193495064 -0.14646261850507966 -0.26728823360099041 0.27725176819495068 0.24452640556450878 0.16847822261705014 -0.18414713406243766 -0.14426837164132944 0.056215611280130175 -0.013162955216517294 0.25346245268842588 -0.15634221753381866 0.25577644143241263 0.21957037307581867 0.1684963081737629;-0.24008301942051036 -0.31875559077812426 0.086408870354454839 -0.20721476893144519 -0.17893940291891916 -0.064362122662672508 -0.021184599053479761 -0.15996028636123716 0.083377671629652192 -0.083684274620967572 0.11941607393229657 -0.24835594760258523 -0.18008003072109779 -0.2477031497912042 -0.28325359196886679 -0.039475737244016221 -0.28597443802558487 0.13673531858239171 0.0015928496769008372 -0.066408218887136397 -0.12377986367956141 -0.049015021670137417 -0.089669765766332454 0.21408333991344708 0.072178862657452367 -0.24639208866612325 -0.012294298172839103 -0.096791483110225743 -0.28178217996864419 -0.28625624769171332 0.0033509961623135803 -0.14144996656646289 0.22635684458759633 -0.25836981763574829 0.1292587400212423 -0.02851960932541972 -0.26572982686809554 -0.2569303403005756 -0.15517479877363982 0.018663212739692379 0.14920585922492929 -0.3083384371981413 -0.12428079184798109 -0.32031234841921163 0.18133083997536362 0.011326545662760068 -0.072582984476573506 -0.0015092856968665748 0.0094380873350590026 -0.30664773114539423 -0.22925218784523815 -0.059030753178590016 -0.13822020028114107 -0.22528423869454298 -0.22655015884364632 0.19910057004917639 -0.12639771566806754 -0.30713175747466254 0.12252893842320194 0.1295063147274445 0.18498448686150903 -0.27687187240683342 -0.24582028362968036 -0.085819673822303599 -0.20224171291440504 0.082018505922365426 -0.16019671431935714 0.1267526110554765 -0.28681801663199308 -0.30774894131819647 -0.10265172615463125 -0.22933911829466289 -0.17401500378798535 0.067587135217513236 -0.1789119240788466 -0.17824426230086621 -0.25905889297387069 0.18272133179588398 0.0033779896071138337 -0.0205913656865334;-0.087714365579752901 -0.12205363115932708 -0.19986741686433157 0.13790876070147265 0.17270083286139559 -0.10328013632289311 -0.27838481697531386 -0.19909622989040515 -0.017225577072241059 -0.28387712511343538 -0.062083470305944355 0.24487684298671991 -0.0099164766342190597 0.24195233527790921 -0.10308918988534878 0.1310953164626894 0.2703233245114573 0.11670821775862937 -0.097810316152473126 0.015641291284993204 0.10233134983647658 -0.15804217975421425 0.2792022102106706 -0.19141927217074398 -0.20443696849796578 -0.21419750843042684 -0.12168472447153532 -0.17217059513873695 0.13958841013340487 -0.10637908444913138 -0.061227138489483815 0.32478043149186825 -0.043493101836916029 -0.28070610875509483 0.12232950426430375 -0.11663157226725789 0.2649308654370558 0.020391385393054927 0.10325512207444895 0.25860512200880564 0.03118630341918157 -0.086173443431958097 0.29014436309894981 -0.19954675174560554 -0.080539926934037914 0.18931652179337946 0.044557676695912304 0.11075607553648159 0.025750253281133138 -0.069726479387774459 0.21186500220603982 -0.042674803714644632 0.12243405149787855 0.2139109796782023 0.19334900334255187 0.059159323598862223 0.12984849746405069 0.20675092709513263 0.0097890070651226319 0.15478503359711054 0.18228087675577317 -0.070906419244867833 -0.21466871307642302 -0.21586874502411091 0.2286031995792413 0.25078976080411697 -0.17536637591662319 0.0035519169998645614 0.32087647360380528 -0.12985339124409759 0.31299041117544346 0.20180491499205791 0.038955080955173749 0.16111134862327697 0.25252710377871546 0.20441737655498843 0.1290416919736678 0.10396055825646643 -0.02153911417728209 0.25828268874099236];
  
  % Layer 2
  b2 = [0.48600763848863476;-0.33401122118694698];
  LW2_1 = [-0.35192802767779391 -0.7003576858354118 0.26170718217634198 -0.28281121114255947 0.082883524348451629 -0.28428192389011636 -0.45343870854139129 -0.64849024990676896 -0.79600691687701686 -1.0607967443345263;-0.50071041643606284 0.41755861482469081 -1.0738148771512186 -0.15572522089678542 0.16995846124628386 0.15183690729865348 -0.75721597921650885 0.18498080337378431 -0.21036478068297626 -0.50494283712190702];
  
  % ===== SIMULATION ========
  
  % Dimensions
  Q = size(x1,2); % samples
  
  % Input 1
  xp1 = mapminmax_apply(x1,x1_step1_gain,x1_step1_xoffset,x1_step1_ymin);
  
  % Layer 1
  a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);
  
  % Layer 2
  a2 = softmax_apply(repmat(b2,1,Q) + LW2_1*a1);
  
  % Output 1
  y1 = a2;
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings_gain,settings_xoffset,settings_ymin)
  y = bsxfun(@minus,x,settings_xoffset);
  y = bsxfun(@times,y,settings_gain);
  y = bsxfun(@plus,y,settings_ymin);
end

% Competitive Soft Transfer Function
function a = softmax_apply(n)
  nmax = max(n,[],1);
  n = bsxfun(@minus,n,nmax);
  numer = exp(n);
  denom = sum(numer,1); 
  denom(denom == 0) = 1;
  a = bsxfun(@rdivide,numer,denom);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end
